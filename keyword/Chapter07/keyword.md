## - 키워드 정리

#### - RestControllerAdvice

- @RestControllerAdvice는 스프링의 전역 예외 처리와 응답 바디 직렬화 기능을 한 번에 제공하는 어노테이션으로 @ControllerAdvice와 @ResponseBody를 합친 어노테이션이다.

    - @ControllerAdvice

        - 어플리케이션의 모든 컨트롤러에서 발생하는 예외를 잡아서 처리할 수 있게 해준다.

    - @ResponseBody

        - 컨트롤러 메서드가 반환하는 객체를 JSON으로 직렬화해서 응답 본문에 담아 보내준다.

- 주요 특징

    - **전역 예외 핸들링**

        - @ExceptionHandler를 선언해 놓으면, 각 컨트롤러 메서드에서 던진 예외를 한 곳에서 묶어서 처리할 수 있다.

    - **일관된 에러 응답**

        - API 응답 포맷을 통일시키기 때문에, 클라이언트에 일관된 형식의 에러 메시지를 전달할 수 있다.

    - **응답 직렬화 자동 적용**

- 사용했을 때 이점

    - 핸들러를 한 번만 정의하면 모든 @RestController에서 던지는 **예외를 일관된 방식으로 처리**할 수 있다.

    - 예외에 대해 **동일한 응답 형태**를 보장한다.

    - 에러 로깅, Sentry 전송, Webhook 전송 등에 대한 로직을 **한 곳에 모아둘 수 있다.**

    - 예외처리, 응답 변환, 로깅, 알림에 대한 로직을 분리하기 때문에 유지보수가 쉬워지고 **컨트롤러는 비즈니스 로직에만 집중할 수 있다.**

- RestControllerAdvice를 사용하지 않으면 어떻게 될까?

    - 각 컨트롤러마다 try~catch를 직접 구현해야 하고, 별도의 에러 발생 메시지와 HTTP 상태 코드를 세팅해야 한다.

    - 응답 형태에 일관성이 없어진다.

    - 로깅, 모니터링 코드가 분산되어 유지보수성이 떨어진다.

#### - lombok

- 어노테이션 기반으로 코드를 자동 생성해주는 라이브러리

- 주요 어노테이션

    - @Getter/@Setter

        - getXXX(), setXXX()와 같은 메서드를 컴파일 시점에 자동으로 추가

    - @NoArgsConstructor, @AllArgsConstructor, @RequiredArgsConstructor

        - 형태별 생성자 자동 생성

    - @Data

        - @Getter + @Setter + @ToString + @EqualsHashCode + @RequiredArgsConstructor

        - @Setter가 들어가니 주의!

    - toString(), equals(), hashCode() 자동 생성

    - @Builder

        - User.builder().name("Bob").build()와 같은 형태로 생성할 수 있는 빌더 메서드 생성

    - @Slf4j

        - 로깅 어노테이션

#### - Webhook

- 애플리케이션 간에 실시간으로 이벤트나 데이터를 푸시하기 위한 HTTP 콜백 메커니즘

- 서버에 특정 이벤트가 발생했을 때 미리 등록해 둔 URL으로 자동으로 HTTP 요청을 보낸다.

- 동작 원리

    1. 클라이언트가 서버에 웹훅 URL을 등록

    2. 서버에서 특정 이벤트가 발생

    3. 서버가 등록된 URL로 HTTP POST 요청을 보내는데, 보통 JSON payload에 이벤트 관련 데이터를 담는다.

    4. 수신자 측 어플리케이션이 엔드포인트에서 요청을 받아 비즈니스 로직 수행

    5. 적절한 응답을 반환

- 장점

    - 실시간 이벤트 알림이 가능하다.

    - 불필요한 polling이 없다.

    - 여러 수신자에게 동일 이벤트를 푸싱할 수 있다.

- 단점

    - 누락, 중복 방지를 위한 재시도와 서명 검증 등의 추가 구현이 필요하다.

    - 엔드포인트 노출 위험이 있어 별도의 보안 조치가 필요하다.

    - 디버깅이 어렵다.

- 주요 사용 사례

    - 결제 승인/실패 이벤트를 webhook 으로 받아 주문 상태 업데이트

    - 깃허브의 푸시나 PR 이벤트를 웹훅으로 받아 자동 빌드,배포 트리거

    - 슬랙, 디스코드와 같은 채팅 서비스에 시스템 이벤트를 실시간으로 알려줌

    - S3 업로드 완료와 같은 알림을 웹훅으로 받아 후속 처리할 수 있다.